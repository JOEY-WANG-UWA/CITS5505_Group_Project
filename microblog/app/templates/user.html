{% extends "base.html" %}
{% block content %}
    <div class="container mt-5">
        <div class="profile-header d-flex justify-content-start">
            <div>
                <img src="{{ user.avatar(128) }}" alt="{{ user.username }}'s profile picture" class="profile-pic">
            </div>
            <div class="profile-info ml-3">
                <h3>{{ user.username }}</h3>
                <p>ID: {{ user.id }}</p>
                <p>Location: {{ user.location }}</p>
                {% if user.about_me %}
                <p>About Me: {{ user.about_me }}</p>
                {% endif %}
                <p>{{ user.followers_count() }} followers, {{ user.following_count() }} following.</p>

            {% if user == current_user %}
                    <p><a href="{{ url_for('edit_profile') }}">Edit your profile</a></p>
                        {% elif not current_user.is_following(user) %}
                <p>
                        <form action="{{ url_for('follow', username=user.username) }}" method="post">
                        {{ form.hidden_tag() }}
                        {{ form.submit(value='Follow', class_='btn btn-primary') }}
                        </form>
                </p>
                {% else %}
                <p>
                        <form action="{{ url_for('unfollow', username=user.username) }}" method="post">
                        {{ form.hidden_tag() }}
                        {{ form.submit(value='Unfollow', class_='btn btn-primary') }}
                        </form>
                </p>
                {% endif %}

        </div>

        <div class="row mt-4">
            <div class="col-12">
                <ul class="nav nav-tabs justify-content-center">
                    {{ render_nav_item('user.show_note', 'Photo', _badge=user.photos_count, username=user.username) }}
                    {{ render_nav_item('user.check_collections', 'Collections', _badge=user.collections_count, username=user.username) }}
                    {{ render_nav_item('user.show_likes', 'Likes', _badge=user.likes_count, username=user.username) }}
                    {{ render_nav_item('user.show_following', 'Following', _badge=user.following_count, username=user.username) }}
                    {{ render_nav_item('user.show_followers', 'Follower', _badge=user.followers_count, username=user.username) }}
                </ul>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
