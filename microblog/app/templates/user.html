{% extends "base.html" %}

{% block content %}
    <div class="container mt-5">
        <!-- Profile Header -->
        <div class="profile-header d-flex justify-content-start">
            <div>
                <img src="{{ user.avatar(128) }}" alt="{{ user.username }}'s profile picture" class="profile-pic">
            </div>
            <div class="profile-info ml-3">
                <h3>{{ user.username }}</h3>
                <p>ID: {{ user.id }}</p>
                <p>Location: {{ user.location }}</p>
                {% if user.about_me %}
                <p>About Me: {{ user.about_me }}</p>
                {% endif %}
                <p>{{ user.followers_count() }} followers, {{ user.following_count() }} following.</p>
                <!-- Profile Actions -->
                {% if user == current_user %}
                    <p><a href="{{ url_for('edit_profile') }}">Edit your profile</a></p>
                {% elif not current_user.is_following(user) %}
                    <p>
                        <form action="{{ url_for('follow', username=user.username) }}" method="post">
                            {{ form.hidden_tag() }}
                            {{ form.submit(value='Follow', class_='btn btn-primary') }}
                        </form>
                    </p>
                {% else %}
                    <p>
                        <form action="{{ url_for('unfollow', username=user.username) }}" method="post">
                            {{ form.hidden_tag() }}
                            {{ form.submit(value='Unfollow', class_='btn btn-primary') }}
                        </form>
                    </p>
                {% endif %}
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="row mt-4">
            <div class="col-12">
                <ul class="nav nav-tabs justify-content-center">
                    <li class="nav-item">
                        <a class="nav-link active" href="{{ url_for('show_note', username=user.username) }}">
                            Photos <span class="badge badge-light">{{ user.photos_count }}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('check_collections', username=user.username) }}">
                            Collections <span class="badge badge-light">{{ user.collections_count }}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('show_likes', username=user.username) }}">
                            Likes <span class="badge badge-light">{{ user.likes_count }}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('show_following', username=user.username) }}">
                            Following
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('show_follower', username=user.username) }}">
                            Followers
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
